<?plantuml 1.2026.1?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" data-diagram-type="SEQUENCE" height="7372.2917px" preserveAspectRatio="none" style="width:3698px;height:7372px;background:#272727;" version="1.1" viewBox="0 0 3698 7372" width="3698.75px" zoomAndPan="magnify"><title>**PlantUML Collaboration - WebSocket Flow with Opt-in Consent**
&lt;size:20&gt;Version 1.5.1 - Privacy First&lt;/size&gt;
&lt;size:16&gt;github.com/JoZapf/EMPC4-containerized-visualization-environment&lt;/size&gt;
&lt;size:16&gt;Live synchronization between two clients (requires explicit consent)&lt;/size&gt;</title><defs><filter height="300%" id="f1jp9n6wadcm8s" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="4.5833"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="9.1667" dy="9.1667" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><rect fill="#272727" height="7372.2917" style="stroke:none;stroke-width:2.2917;" width="3698.75" x="0" y="0"/><text fill="#FFFFFF" font-family="'Segoe UI'" font-size="87.0833" font-weight="bold" lengthAdjust="spacing" textLength="3076.661" x="308.359" y="115.2077">PlantUML Collaboration - WebSocket Flow with Opt-in Consent</text><text fill="#FFFFFF" font-family="'Segoe UI'" font-size="45.8333" font-weight="bold" lengthAdjust="spacing" textLength="718.1824" x="1487.5983" y="178.289">Version 1.5.1 - Privacy First</text><text fill="#FFFFFF" font-family="'Segoe UI'" font-size="36.6667" font-weight="bold" lengthAdjust="spacing" textLength="1386.709" x="1153.335" y="223.1331">github.com/JoZapf/EMPC4-containerized-visualization-environment</text><text fill="#FFFFFF" font-family="'Segoe UI'" font-size="36.6667" font-weight="bold" lengthAdjust="spacing" textLength="1416.5365" x="1138.4212" y="265.8154">Live synchronization between two clients (requires explicit consent)</text><g class="participant-lifeline" data-entity-uid="part1" data-qualified-name="A" id="part1-lifeline"><g><title>Browser A</title><rect fill="#000000" fill-opacity="0.00000" height="6784.1569" width="18.3333" x="387.0511" y="436.9564"/><line style="stroke:#78909C;stroke-width:2.2917;stroke-dasharray:11.4583,11.4583;" x1="394.1667" x2="394.1667" y1="436.9564" y2="7221.1133"/></g></g><g class="participant-lifeline" data-entity-uid="part2" data-qualified-name="ctrl" id="part2-lifeline"><g><title>collab-control.js</title><rect fill="#000000" fill-opacity="0.00000" height="6784.1569" width="18.3333" x="1045.6546" y="436.9564"/><line style="stroke:#78909C;stroke-width:2.2917;stroke-dasharray:11.4583,11.4583;" x1="1052.8138" x2="1052.8138" y1="436.9564" y2="7221.1133"/></g></g><g class="participant-lifeline" data-entity-uid="part3" data-qualified-name="nginx" id="part3-lifeline"><g><title>Host nginx</title><rect fill="#000000" fill-opacity="0.00000" height="6784.1569" width="18.3333" x="1427.6211" y="436.9564"/><line style="stroke:#78909C;stroke-width:2.2917;stroke-dasharray:11.4583,11.4583;" x1="1434.9537" x2="1434.9537" y1="436.9564" y2="7221.1133"/></g></g><g class="participant-lifeline" data-entity-uid="part4" data-qualified-name="traefik" id="part4-lifeline"><g><title>Traefik</title><rect fill="#000000" fill-opacity="0.00000" height="6784.1569" width="18.3333" x="2022.5771" y="436.9564"/><line style="stroke:#78909C;stroke-width:2.2917;stroke-dasharray:11.4583,11.4583;" x1="2030.2981" x2="2030.2981" y1="436.9564" y2="7221.1133"/></g></g><g class="participant-lifeline" data-entity-uid="part5" data-qualified-name="sync" id="part5-lifeline"><g><title>plantuml-sync</title><rect fill="#000000" fill-opacity="0.00000" height="6784.1569" width="18.3333" x="2705.2498" y="436.9564"/><line style="stroke:#78909C;stroke-width:2.2917;stroke-dasharray:11.4583,11.4583;" x1="2713.6187" x2="2713.6187" y1="436.9564" y2="7221.1133"/></g></g><g class="participant-lifeline" data-entity-uid="part6" data-qualified-name="B" id="part6-lifeline"><g><title>Browser B</title><rect fill="#000000" fill-opacity="0.00000" height="6784.1569" width="18.3333" x="3343.6916" y="436.9564"/><line style="stroke:#78909C;stroke-width:2.2917;stroke-dasharray:11.4583,11.4583;" x1="3352.3928" x2="3352.3928" y1="436.9564" y2="7221.1133"/></g></g><g class="participant participant-head" data-entity-uid="part1" data-qualified-name="A" id="part1-head"><rect fill="#1E88E5" filter="url(#f1jp9n6wadcm8s)" height="128.1185" rx="5.7292" ry="5.7292" style="stroke:#78909C;stroke-width:2.2917;" width="249.3105" x="268.125" y="299.6712"/><text fill="#FFFFFF" font-family="'Segoe UI'" font-size="41.25" lengthAdjust="spacing" textLength="209.3921" x="288.0842" y="354.0021">Browser A</text><text fill="#FFFFFF" font-family="'Segoe UI'" font-size="41.25" lengthAdjust="spacing" textLength="217.2272" x="284.1667" y="402.0197">(Windows)</text></g><g class="participant participant-tail" data-entity-uid="part1" data-qualified-name="A" id="part1-tail"><rect fill="#1E88E5" filter="url(#f1jp9n6wadcm8s)" height="128.1185" rx="5.7292" ry="5.7292" style="stroke:#78909C;stroke-width:2.2917;" width="249.3105" x="268.125" y="7218.8216"/><text fill="#FFFFFF" font-family="'Segoe UI'" font-size="41.25" lengthAdjust="spacing" textLength="209.3921" x="288.0842" y="7273.1525">Browser A</text><text fill="#FFFFFF" font-family="'Segoe UI'" font-size="41.25" lengthAdjust="spacing" textLength="217.2272" x="284.1667" y="7321.17">(Windows)</text></g><g class="participant participant-head" data-entity-uid="part2" data-qualified-name="ctrl" id="part2-head"><rect fill="#FF5722" filter="url(#f1jp9n6wadcm8s)" height="128.1185" rx="5.7292" ry="5.7292" style="stroke:#78909C;stroke-width:2.2917;" width="359.2232" x="871.7722" y="299.6712"/><text fill="#FFFFFF" font-family="'Segoe UI'" font-size="41.25" lengthAdjust="spacing" textLength="327.1399" x="887.8138" y="354.0021">collab-control.js</text><text fill="#FFFFFF" font-family="'Segoe UI'" font-size="41.25" lengthAdjust="spacing" textLength="261.6193" x="920.5741" y="402.0197">(Interceptor)</text></g><g class="participant participant-tail" data-entity-uid="part2" data-qualified-name="ctrl" id="part2-tail"><rect fill="#FF5722" filter="url(#f1jp9n6wadcm8s)" height="128.1185" rx="5.7292" ry="5.7292" style="stroke:#78909C;stroke-width:2.2917;" width="359.2232" x="871.7722" y="7218.8216"/><text fill="#FFFFFF" font-family="'Segoe UI'" font-size="41.25" lengthAdjust="spacing" textLength="327.1399" x="887.8138" y="7273.1525">collab-control.js</text><text fill="#FFFFFF" font-family="'Segoe UI'" font-size="41.25" lengthAdjust="spacing" textLength="261.6193" x="920.5741" y="7321.17">(Interceptor)</text></g><g class="participant participant-head" data-entity-uid="part3" data-qualified-name="nginx" id="part3-head"><rect fill="#FF8F00" filter="url(#f1jp9n6wadcm8s)" height="128.1185" rx="5.7292" ry="5.7292" style="stroke:#78909C;stroke-width:2.2917;" width="253.4597" x="1306.6204" y="299.6712"/><text fill="#FFFFFF" font-family="'Segoe UI'" font-size="41.25" lengthAdjust="spacing" textLength="221.3763" x="1322.662" y="354.0021">Host nginx</text><text fill="#FFFFFF" font-family="'Segoe UI'" font-size="41.25" lengthAdjust="spacing" textLength="66.3867" x="1400.1569" y="402.0197">:80</text></g><g class="participant participant-tail" data-entity-uid="part3" data-qualified-name="nginx" id="part3-tail"><rect fill="#FF8F00" filter="url(#f1jp9n6wadcm8s)" height="128.1185" rx="5.7292" ry="5.7292" style="stroke:#78909C;stroke-width:2.2917;" width="253.4597" x="1306.6204" y="7218.8216"/><text fill="#FFFFFF" font-family="'Segoe UI'" font-size="41.25" lengthAdjust="spacing" textLength="221.3763" x="1322.662" y="7273.1525">Host nginx</text><text fill="#FFFFFF" font-family="'Segoe UI'" font-size="41.25" lengthAdjust="spacing" textLength="66.3867" x="1400.1569" y="7321.17">:80</text></g><g class="participant participant-head" data-entity-uid="part4" data-qualified-name="traefik" id="part4-head"><rect fill="#AB47BC" filter="url(#f1jp9n6wadcm8s)" height="128.1185" rx="5.7292" ry="5.7292" style="stroke:#78909C;stroke-width:2.2917;" width="174.7664" x="1940.9231" y="299.6712"/><text fill="#FFFFFF" font-family="'Segoe UI'" font-size="41.25" lengthAdjust="spacing" textLength="142.6831" x="1956.9647" y="354.0021">Traefik</text><text fill="#FFFFFF" font-family="'Segoe UI'" font-size="41.25" lengthAdjust="spacing" textLength="118.8757" x="1968.8684" y="402.0197">:8100</text></g><g class="participant participant-tail" data-entity-uid="part4" data-qualified-name="traefik" id="part4-tail"><rect fill="#AB47BC" filter="url(#f1jp9n6wadcm8s)" height="128.1185" rx="5.7292" ry="5.7292" style="stroke:#78909C;stroke-width:2.2917;" width="174.7664" x="1940.9231" y="7218.8216"/><text fill="#FFFFFF" font-family="'Segoe UI'" font-size="41.25" lengthAdjust="spacing" textLength="142.6831" x="1956.9647" y="7273.1525">Traefik</text><text fill="#FFFFFF" font-family="'Segoe UI'" font-size="41.25" lengthAdjust="spacing" textLength="118.8757" x="1968.8684" y="7321.17">:8100</text></g><g class="participant participant-head" data-entity-uid="part5" data-qualified-name="sync" id="part5-head"><rect fill="#43A047" filter="url(#f1jp9n6wadcm8s)" height="128.1185" rx="5.7292" ry="5.7292" style="stroke:#78909C;stroke-width:2.2917;" width="324.7207" x="2548.6187" y="299.6712"/><text fill="#FFFFFF" font-family="'Segoe UI'" font-size="41.25" lengthAdjust="spacing" textLength="292.6373" x="2564.6603" y="354.0021">plantuml-sync</text><text fill="#FFFFFF" font-family="'Segoe UI'" font-size="41.25" lengthAdjust="spacing" textLength="118.8757" x="2651.5411" y="402.0197">:5001</text></g><g class="participant participant-tail" data-entity-uid="part5" data-qualified-name="sync" id="part5-tail"><rect fill="#43A047" filter="url(#f1jp9n6wadcm8s)" height="128.1185" rx="5.7292" ry="5.7292" style="stroke:#78909C;stroke-width:2.2917;" width="324.7207" x="2548.6187" y="7218.8216"/><text fill="#FFFFFF" font-family="'Segoe UI'" font-size="41.25" lengthAdjust="spacing" textLength="292.6373" x="2564.6603" y="7273.1525">plantuml-sync</text><text fill="#FFFFFF" font-family="'Segoe UI'" font-size="41.25" lengthAdjust="spacing" textLength="118.8757" x="2651.5411" y="7321.17">:5001</text></g><g class="participant participant-head" data-entity-uid="part6" data-qualified-name="B" id="part6-head"><rect fill="#1E88E5" filter="url(#f1jp9n6wadcm8s)" height="128.1185" rx="5.7292" ry="5.7292" style="stroke:#78909C;stroke-width:2.2917;" width="241.556" x="3228.6428" y="299.6712"/><text fill="#FFFFFF" font-family="'Segoe UI'" font-size="41.25" lengthAdjust="spacing" textLength="209.4727" x="3244.6844" y="354.0021">Browser B</text><text fill="#FFFFFF" font-family="'Segoe UI'" font-size="41.25" lengthAdjust="spacing" textLength="183.1677" x="3257.8369" y="402.0197">(Ubuntu)</text></g><g class="participant participant-tail" data-entity-uid="part6" data-qualified-name="B" id="part6-tail"><rect fill="#1E88E5" filter="url(#f1jp9n6wadcm8s)" height="128.1185" rx="5.7292" ry="5.7292" style="stroke:#78909C;stroke-width:2.2917;" width="241.556" x="3228.6428" y="7218.8216"/><text fill="#FFFFFF" font-family="'Segoe UI'" font-size="41.25" lengthAdjust="spacing" textLength="209.4727" x="3244.6844" y="7273.1525">Browser B</text><text fill="#FFFFFF" font-family="'Segoe UI'" font-size="41.25" lengthAdjust="spacing" textLength="183.1677" x="3257.8369" y="7321.17">(Ubuntu)</text></g><rect fill="#455A64" filter="url(#f1jp9n6wadcm8s)" height="6.875" style="stroke:#455A64;stroke-width:2.2917;" width="3672.7539" x="11.4583" y="513.6735"/><line style="stroke:#000000;stroke-width:1.1458;" x1="11.4583" x2="3684.2122" y1="513.6735" y2="513.6735"/><line style="stroke:#000000;stroke-width:1.1458;" x1="11.4583" x2="3684.2122" y1="520.5485" y2="520.5485"/><rect fill="#455A64" filter="url(#f1jp9n6wadcm8s)" height="66.3509" style="stroke:#000000;stroke-width:2.2917;" width="338.6788" x="1678.4959" y="482.7897"/><text fill="#FFFFFF" font-family="'Segoe UI'" font-size="41.25" font-weight="bold" lengthAdjust="spacing" textLength="292.2345" x="1692.2459" y="530.2456">Initialization</text><path d="M252.0833,583.5156 L252.0833,732.474 L3494.7917,732.474 L3494.7917,606.4323 L3471.875,583.5156 L252.0833,583.5156" fill="#455A64" filter="url(#f1jp9n6wadcm8s)" style="stroke:#FBC02D;stroke-width:2.2917;"/><path d="M3471.875,583.5156 L3471.875,606.4323 L3494.7917,606.4323 L3471.875,583.5156" fill="#455A64" style="stroke:#FBC02D;stroke-width:2.2917;"/><text fill="#FFFFFF" font-family="'Segoe UI'" font-size="36.6667" lengthAdjust="spacing" textLength="514.9447" x="1496.9003" y="629.0088">Both clients load same URL:</text><text fill="#90CAF9" font-family="'Segoe UI'" font-size="36.6667" lengthAdjust="spacing" textLength="517.666" x="1496.9003" y="671.6911">http://arch.local/uml/form/...</text><text fill="#FFFFFF" font-family="'Segoe UI'" font-size="36.6667" lengthAdjust="spacing" textLength="726.1898" x="1496.9003" y="714.3734">&#8594; Same Room-ID (from URL pathname)</text><g class="message" data-entity-1="part1" data-entity-2="part3" id="msg1"><polygon fill="#90CAF9" points="1409.2877,855.7406,1432.2044,864.9072,1409.2877,874.0739,1418.4544,864.9072" style="stroke:#90CAF9;stroke-width:2.2917;"/><line style="stroke:#90CAF9;stroke-width:2.2917;" x1="396.2178" x2="1423.0377" y1="864.9072" y2="864.9072"/><text fill="#FFFFFF" font-family="'Segoe UI'" font-size="41.25" lengthAdjust="spacing" textLength="83.2251" x="660.4325" y="850.5955">GET</text><text fill="#FFFFFF" font-family="'Segoe UI'" font-size="41.25" lengthAdjust="spacing" textLength="13.1122" x="743.6576" y="850.5955">&#160;</text><text fill="#FFFFFF" font-family="'Segoe UI'" font-size="41.25" lengthAdjust="spacing" textLength="255.7178" x="756.7698" y="850.5955">/uml/form/...</text><text fill="#FFFFFF" font-family="'Segoe UI'" font-size="41.25" lengthAdjust="spacing" textLength="13.1122" x="1012.4875" y="850.5955">&#160;</text><text fill="#FFFFFF" font-family="'Segoe UI'" font-size="41.25" lengthAdjust="spacing" textLength="146.9733" x="1025.5997" y="850.5955">(HTML)</text></g><path d="M1446.0417,764.2708 L1446.0417,913.2292 L2209.1667,913.2292 L2209.1667,787.1875 L2186.25,764.2708 L1446.0417,764.2708" fill="#FFFDE7" filter="url(#f1jp9n6wadcm8s)" style="stroke:#FBC02D;stroke-width:2.2917;"/><path d="M2186.25,764.2708 L2186.25,787.1875 L2209.1667,787.1875 L2186.25,764.2708" fill="#FFFDE7" style="stroke:#FBC02D;stroke-width:2.2917;"/><text fill="#333333" font-family="'Segoe UI'" font-size="36.6667" lengthAdjust="spacing" textLength="548.7826" x="1459.7917" y="809.764">Jetty serves Monaco + sync.js</text><text fill="#333333" font-family="'Segoe UI'" font-size="36.6667" font-weight="bold" lengthAdjust="spacing" textLength="716.5576" x="1459.7917" y="852.4463">+ collab-control.js (HEAD injected)</text><text fill="#333333" font-family="'Segoe UI'" font-size="36.6667" lengthAdjust="spacing" textLength="605.9847" x="1459.7917" y="895.1286">+ socket.io.min.js (IIFE wrapped)</text><g class="message" data-entity-1="part3" data-entity-2="part1" id="msg3"><polygon fill="#90CAF9" points="421.4261,933.5677,398.5094,942.7344,421.4261,951.901,412.2594,942.7344" style="stroke:#90CAF9;stroke-width:2.2917;"/><line style="stroke:#90CAF9;stroke-width:2.2917;stroke-dasharray:4.5833,4.5833;" x1="407.6761" x2="1434.4961" y1="942.7344" y2="942.7344"/><text fill="#FFFFFF" font-family="'Segoe UI'" font-size="41.25" lengthAdjust="spacing" textLength="114.787" x="809.5408" y="983.3152">HTML</text><text fill="#FFFFFF" font-family="'Segoe UI'" font-size="41.25" lengthAdjust="spacing" textLength="13.1122" x="924.3277" y="983.3152">&#160;</text><text fill="#FFFFFF" font-family="'Segoe UI'" font-size="41.25" lengthAdjust="spacing" textLength="34.563" x="937.4399" y="983.3152">+</text><text fill="#FFFFFF" font-family="'Segoe UI'" font-size="41.25" lengthAdjust="spacing" textLength="13.1122" x="972.0029" y="983.3152">&#160;</text><text fill="#FFFFFF" font-family="'Segoe UI'" font-size="41.25" lengthAdjust="spacing" textLength="38.3496" x="985.1151" y="983.3152">JS</text></g><path d="M22.9167,1025.127 L22.9167,1261.1686 L760.8333,1261.1686 L760.8333,1048.0436 L737.9167,1025.127 L22.9167,1025.127" fill="#FF5722" filter="url(#f1jp9n6wadcm8s)" style="stroke:#FBC02D;stroke-width:2.2917;"/><path d="M737.9167,1025.127 L737.9167,1048.0436 L760.8333,1048.0436 L737.9167,1025.127" fill="#FF5722" style="stroke:#FBC02D;stroke-width:2.2917;"/><text fill="#FFFFFF" font-family="'Segoe UI'" font-size="36.6667" font-weight="bold" lengthAdjust="spacing" textLength="602.0996" x="36.6667" y="1070.6201">collab-control.js loads FIRST:</text><text fill="#FFFFFF" font-family="'Segoe UI'" font-size="36.6667" lengthAdjust="spacing" textLength="400.9521" x="36.6667" y="1113.3024">&#8226; Patches window.io()</text><text fill="#FFFFFF" font-family="'Segoe UI'" font-size="36.6667" lengthAdjust="spacing" textLength="674.7705" x="36.6667" y="1155.9847">&#8226; Patches window.BroadcastChannel</text><text fill="#FFFFFF" font-family="'Segoe UI'" font-size="36.6667" lengthAdjust="spacing" textLength="691.6357" x="36.6667" y="1198.667">&#8226; Generates Tab-ID in sessionStorage</text><text fill="#FFFFFF" font-family="'Segoe UI'" font-size="36.6667" lengthAdjust="spacing" textLength="517.5228" x="36.6667" y="1241.3493">&#8226; Creates UI: &#128993; Sync: Off [&#9654;]</text><g class="message" data-entity-1="part6" data-entity-2="part3" id="msg4"><polygon fill="#90CAF9" points="1461.9961,1332.3893,1439.0794,1341.556,1461.9961,1350.7227,1452.8294,1341.556" style="stroke:#90CAF9;stroke-width:2.2917;"/><line style="stroke:#90CAF9;stroke-width:2.2917;" x1="1448.2461" x2="3350.5666" y1="1341.556" y2="1341.556"/><text fill="#FFFFFF" font-family="'Segoe UI'" font-size="41.25" lengthAdjust="spacing" textLength="83.2251" x="2138.7527" y="1327.2443">GET</text><text fill="#FFFFFF" font-family="'Segoe UI'" font-size="41.25" lengthAdjust="spacing" textLength="13.1122" x="2221.9778" y="1327.2443">&#160;</text><text fill="#FFFFFF" font-family="'Segoe UI'" font-size="41.25" lengthAdjust="spacing" textLength="255.7178" x="2235.09" y="1327.2443">/uml/form/...</text><text fill="#FFFFFF" font-family="'Segoe UI'" font-size="41.25" lengthAdjust="spacing" textLength="13.1122" x="2490.8078" y="1327.2443">&#160;</text><text fill="#FFFFFF" font-family="'Segoe UI'" font-size="41.25" lengthAdjust="spacing" textLength="146.9733" x="2503.92" y="1327.2443">(HTML)</text></g><g class="message" data-entity-1="part3" data-entity-2="part6" id="msg5"><polygon fill="#90CAF9" points="3325.3583,1359.8893,3348.2749,1369.056,3325.3583,1378.2227,3334.5249,1369.056" style="stroke:#90CAF9;stroke-width:2.2917;"/><line style="stroke:#90CAF9;stroke-width:2.2917;stroke-dasharray:4.5833,4.5833;" x1="1436.7877" x2="3339.1083" y1="1369.056" y2="1369.056"/><text fill="#FFFFFF" font-family="'Segoe UI'" font-size="41.25" lengthAdjust="spacing" textLength="114.787" x="2287.861" y="1409.6368">HTML</text><text fill="#FFFFFF" font-family="'Segoe UI'" font-size="41.25" lengthAdjust="spacing" textLength="13.1122" x="2402.648" y="1409.6368">&#160;</text><text fill="#FFFFFF" font-family="'Segoe UI'" font-size="41.25" lengthAdjust="spacing" textLength="34.563" x="2415.7602" y="1409.6368">+</text><text fill="#FFFFFF" font-family="'Segoe UI'" font-size="41.25" lengthAdjust="spacing" textLength="13.1122" x="2450.3232" y="1409.6368">&#160;</text><text fill="#FFFFFF" font-family="'Segoe UI'" font-size="41.25" lengthAdjust="spacing" textLength="38.3496" x="2463.4354" y="1409.6368">JS</text></g><rect fill="#455A64" filter="url(#f1jp9n6wadcm8s)" height="6.875" style="stroke:#455A64;stroke-width:2.2917;" width="3672.7539" x="11.4583" y="1493.7907"/><line style="stroke:#000000;stroke-width:1.1458;" x1="11.4583" x2="3684.2122" y1="1493.7907" y2="1493.7907"/><line style="stroke:#000000;stroke-width:1.1458;" x1="11.4583" x2="3684.2122" y1="1500.6657" y2="1500.6657"/><rect fill="#455A64" filter="url(#f1jp9n6wadcm8s)" height="66.3509" style="stroke:#000000;stroke-width:2.2917;" width="906.7727" x="1394.449" y="1462.9069"/><text fill="#FFFFFF" font-family="'Segoe UI'" font-size="41.25" font-weight="bold" lengthAdjust="spacing" textLength="860.3284" x="1408.199" y="1510.3628">WebSocket Connection (Intercepted)</text><path d="M222.2917,1563.6328 L222.2917,1712.5911 L1226.0417,1712.5911 L1226.0417,1586.5495 L1203.125,1563.6328 L222.2917,1563.6328" fill="#FF5722" filter="url(#f1jp9n6wadcm8s)" style="stroke:#FBC02D;stroke-width:2.2917;"/><path d="M1203.125,1563.6328 L1203.125,1586.5495 L1226.0417,1586.5495 L1203.125,1563.6328" fill="#FF5722" style="stroke:#FBC02D;stroke-width:2.2917;"/><text fill="#FFFFFF" font-family="'Segoe UI'" font-size="36.6667" lengthAdjust="spacing" textLength="572.1647" x="373.0734" y="1609.126">sync.js calls io() &#8594; intercepted!</text><text fill="#90CAF9" font-family="'Segoe UI'" font-size="36.6667" lengthAdjust="spacing" textLength="675.057" x="373.0734" y="1651.8083">socket = io('http://.../plantuml-sync')</text><text fill="#FFFFFF" font-family="'Segoe UI'" font-size="36.6667" lengthAdjust="spacing" textLength="666.9824" x="373.0734" y="1694.4906">collab-control.js wraps socket.emit()</text><g class="message" data-entity-1="part1" data-entity-2="part3" id="msg6"><polygon fill="#90CAF9" points="1409.2877,1833.5482,1432.2044,1842.7148,1409.2877,1851.8815,1418.4544,1842.7148" style="stroke:#90CAF9;stroke-width:2.2917;"/><line style="stroke:#90CAF9;stroke-width:2.2917;" x1="396.2178" x2="1423.0377" y1="1842.7148" y2="1842.7148"/><text fill="#FFFFFF" font-family="'Segoe UI'" font-size="41.25" font-weight="bold" lengthAdjust="spacing" textLength="75.2087" x="772.6011" y="1780.3855">WS</text><text fill="#FFFFFF" font-family="'Segoe UI'" font-size="41.25" font-weight="bold" lengthAdjust="spacing" textLength="14.361" x="847.8098" y="1780.3855">&#160;</text><text fill="#FFFFFF" font-family="'Segoe UI'" font-size="41.25" font-weight="bold" lengthAdjust="spacing" textLength="198.2336" x="862.1708" y="1780.3855">Upgrade</text><text fill="#FFFFFF" font-family="'Segoe UI'" font-size="41.25" lengthAdjust="spacing" textLength="83.2251" x="446.6697" y="1828.4031">GET</text><text fill="#FFFFFF" font-family="'Segoe UI'" font-size="41.25" lengthAdjust="spacing" textLength="13.1122" x="529.8948" y="1828.4031">&#160;</text><text fill="#FFFFFF" font-family="'Segoe UI'" font-size="41.25" lengthAdjust="spacing" textLength="843.3289" x="543.0069" y="1828.4031">/socket.io/?EIO=4&amp;transport=websocket</text></g><g class="message" data-entity-1="part3" data-entity-2="part4" id="msg7"><polygon fill="#90CAF9" points="2004.2438,1913.6491,2027.1604,1922.8158,2004.2438,1931.9824,2013.4104,1922.8158" style="stroke:#90CAF9;stroke-width:2.2917;"/><line style="stroke:#90CAF9;stroke-width:2.2917;" x1="1436.7877" x2="2017.9938" y1="1922.8158" y2="1922.8158"/><text fill="#FFFFFF" font-family="'Segoe UI'" font-size="41.25" lengthAdjust="spacing" textLength="232.2729" x="1464.2877" y="1908.504">proxy_pass</text><text fill="#FFFFFF" font-family="'Segoe UI'" font-size="41.25" lengthAdjust="spacing" textLength="13.1122" x="1696.5607" y="1908.504">&#160;</text><text fill="#FFFFFF" font-family="'Segoe UI'" font-size="41.25" lengthAdjust="spacing" textLength="34.563" x="1709.6729" y="1908.504">+</text><text fill="#FFFFFF" font-family="'Segoe UI'" font-size="41.25" lengthAdjust="spacing" textLength="13.1122" x="1744.2358" y="1908.504">&#160;</text><text fill="#FFFFFF" font-family="'Segoe UI'" font-size="41.25" lengthAdjust="spacing" textLength="66.9708" x="1757.348" y="1908.504">WS</text><text fill="#FFFFFF" font-family="'Segoe UI'" font-size="41.25" lengthAdjust="spacing" textLength="13.1122" x="1824.3188" y="1908.504">&#160;</text><text fill="#FFFFFF" font-family="'Segoe UI'" font-size="41.25" lengthAdjust="spacing" textLength="166.8127" x="1837.431" y="1908.504">headers</text></g><g class="message" data-entity-1="part4" data-entity-2="part5" id="msg8"><polygon fill="#90CAF9" points="2686.9165,1993.75,2709.8332,2002.9167,2686.9165,2012.0833,2696.0832,2002.9167" style="stroke:#90CAF9;stroke-width:2.2917;"/><line style="stroke:#90CAF9;stroke-width:2.2917;" x1="2031.7438" x2="2700.6665" y1="2002.9167" y2="2002.9167"/><text fill="#FFFFFF" font-family="'Segoe UI'" font-size="41.25" lengthAdjust="spacing" textLength="135.4926" x="2059.2438" y="1988.6049">Route:</text><text fill="#FFFFFF" font-family="'Segoe UI'" font-size="41.25" lengthAdjust="spacing" textLength="13.1122" x="2194.7363" y="1988.6049">&#160;</text><text fill="#FFFFFF" font-family="'Segoe UI'" font-size="41.25" lengthAdjust="spacing" textLength="479.068" x="2207.8485" y="1988.6049">plantuml-sync-socketio</text></g><g class="message" data-entity-1="part5" data-entity-2="part1" id="msg9"><polygon fill="#90CAF9" points="421.4261,2073.8509,398.5094,2083.0176,421.4261,2092.1842,412.2594,2083.0176" style="stroke:#90CAF9;stroke-width:2.2917;"/><line style="stroke:#90CAF9;stroke-width:2.2917;stroke-dasharray:4.5833,4.5833;" x1="407.6761" x2="2712.1248" y1="2083.0176" y2="2083.0176"/><text fill="#FFFFFF" font-family="'Segoe UI'" font-size="41.25" font-weight="bold" lengthAdjust="spacing" textLength="75.2087" x="1356.8418" y="2068.7059">WS</text><text fill="#FFFFFF" font-family="'Segoe UI'" font-size="41.25" font-weight="bold" lengthAdjust="spacing" textLength="14.361" x="1432.0505" y="2068.7059">&#160;</text><text fill="#FFFFFF" font-family="'Segoe UI'" font-size="41.25" font-weight="bold" lengthAdjust="spacing" textLength="269.5148" x="1446.4115" y="2068.7059">Established</text><text fill="#FFFFFF" font-family="'Segoe UI'" font-size="41.25" lengthAdjust="spacing" textLength="13.1122" x="1715.9263" y="2068.7059">&#160;</text><text fill="#FFFFFF" font-family="'Segoe UI'" font-size="41.25" lengthAdjust="spacing" textLength="24.754" x="1729.0384" y="2068.7059">&#9989;</text></g><path d="M222.2917,2112.8092 L222.2917,2305.3092 L1226.0417,2305.3092 L1226.0417,2135.7259 L1203.125,2112.8092 L222.2917,2112.8092" fill="#FF5722" filter="url(#f1jp9n6wadcm8s)" style="stroke:#FBC02D;stroke-width:2.2917;"/><path d="M1203.125,2112.8092 L1203.125,2135.7259 L1226.0417,2135.7259 L1203.125,2112.8092" fill="#FF5722" style="stroke:#FBC02D;stroke-width:2.2917;"/><text fill="#FFFFFF" font-family="'Segoe UI'" font-size="36.6667" lengthAdjust="spacing" textLength="605.1432" x="379.5187" y="2158.3024">sync.js: emit('join', {room: "..."})</text><text fill="#FFD54F" font-family="'Segoe UI'" font-size="36.6667" font-weight="bold" lengthAdjust="spacing" textLength="662.1663" x="379.5187" y="2200.9847">&#8594; BLOCKED by collab-control.js!</text><text fill="#FFFFFF" font-family="'Segoe UI'" font-size="36.6667" lengthAdjust="spacing" textLength="590.14" x="379.5187" y="2243.667">pendingJoinData stored for later</text><text fill="#FFFFFF" font-family="'Segoe UI'" font-size="36.6667" lengthAdjust="spacing" textLength="387.9004" x="379.5187" y="2286.3493">UI shows: &#128993; Sync: Off</text><g class="message" data-entity-1="part1" data-entity-2="part2" id="msg10"><line style="stroke:#90CAF9;stroke-width:4.5833;" x1="1013.5713" x2="1036.4879" y1="2375.0977" y2="2398.0143"/><line style="stroke:#90CAF9;stroke-width:4.5833;" x1="1013.5713" x2="1036.4879" y1="2398.0143" y2="2375.0977"/><line style="stroke:#90CAF9;stroke-width:2.2917;" x1="396.2178" x2="1025.0296" y1="2386.556" y2="2386.556"/><text fill="#FFFFFF" font-family="'Segoe UI'" font-size="41.25" lengthAdjust="spacing" textLength="120.6281" x="484.2936" y="2372.2443">emit('</text><text fill="#FFFFFF" font-family="'Segoe UI'" font-size="41.25" font-weight="bold" lengthAdjust="spacing" textLength="85.9845" x="604.9217" y="2372.2443">join</text><text fill="#FFFFFF" font-family="'Segoe UI'" font-size="41.25" lengthAdjust="spacing" textLength="27.4329" x="690.9062" y="2372.2443">')</text><text fill="#FFFFFF" font-family="'Segoe UI'" font-size="41.25" lengthAdjust="spacing" textLength="13.1122" x="718.339" y="2372.2443">&#160;</text><text fill="#FFFFFF" font-family="'Segoe UI'" font-size="41.25" lengthAdjust="spacing" textLength="24.754" x="731.4512" y="2372.2443">&#10060;</text><text fill="#FFFFFF" font-family="'Segoe UI'" font-size="41.25" lengthAdjust="spacing" textLength="13.1122" x="756.2052" y="2372.2443">&#160;</text><text fill="#FFFFFF" font-family="'Segoe UI'" font-size="41.25" lengthAdjust="spacing" textLength="197.428" x="769.3174" y="2372.2443">BLOCKED</text></g><path d="M1065.625,2416.3477 L1065.625,2480.5143 L1567.5,2480.5143 L1567.5,2439.2643 L1544.5833,2416.3477 L1065.625,2416.3477" fill="#FF5722" filter="url(#f1jp9n6wadcm8s)" style="stroke:#FBC02D;stroke-width:2.2917;"/><path d="M1544.5833,2416.3477 L1544.5833,2439.2643 L1567.5,2439.2643 L1544.5833,2416.3477" fill="#FF5722" style="stroke:#FBC02D;stroke-width:2.2917;"/><text fill="#FFFFFF" font-family="'Segoe UI'" font-size="36.6667" lengthAdjust="spacing" textLength="453.7858" x="1079.375" y="2461.8408">Sync OFF &#8594; join not sent</text><g class="message" data-entity-1="part6" data-entity-2="part3" id="msg11"><polygon fill="#90CAF9" points="1461.9961,2552.8809,1439.0794,2562.0475,1461.9961,2571.2142,1452.8294,2562.0475" style="stroke:#90CAF9;stroke-width:2.2917;"/><line style="stroke:#90CAF9;stroke-width:2.2917;" x1="1448.2461" x2="3350.5666" y1="2562.0475" y2="2562.0475"/><text fill="#FFFFFF" font-family="'Segoe UI'" font-size="41.25" font-weight="bold" lengthAdjust="spacing" textLength="75.2087" x="2123.0725" y="2547.7358">WS</text><text fill="#FFFFFF" font-family="'Segoe UI'" font-size="41.25" font-weight="bold" lengthAdjust="spacing" textLength="14.361" x="2198.2813" y="2547.7358">&#160;</text><text fill="#FFFFFF" font-family="'Segoe UI'" font-size="41.25" font-weight="bold" lengthAdjust="spacing" textLength="198.2336" x="2212.6422" y="2547.7358">Upgrade</text><text fill="#FFFFFF" font-family="'Segoe UI'" font-size="41.25" lengthAdjust="spacing" textLength="13.1122" x="2410.8759" y="2547.7358">&#160;</text><text fill="#FFFFFF" font-family="'Segoe UI'" font-size="41.25" lengthAdjust="spacing" textLength="128.4229" x="2423.988" y="2547.7358">(same</text><text fill="#FFFFFF" font-family="'Segoe UI'" font-size="41.25" lengthAdjust="spacing" textLength="13.1122" x="2552.4109" y="2547.7358">&#160;</text><text fill="#FFFFFF" font-family="'Segoe UI'" font-size="41.25" lengthAdjust="spacing" textLength="101.0504" x="2565.5231" y="2547.7358">flow)</text></g><g class="message" data-entity-1="part3" data-entity-2="part6" id="msg12"><polygon fill="#90CAF9" points="3325.3583,2632.9818,3348.2749,2642.1484,3325.3583,2651.3151,3334.5249,2642.1484" style="stroke:#90CAF9;stroke-width:2.2917;"/><line style="stroke:#90CAF9;stroke-width:2.2917;stroke-dasharray:4.5833,4.5833;" x1="1436.7877" x2="3339.1083" y1="2642.1484" y2="2642.1484"/><text fill="#FFFFFF" font-family="'Segoe UI'" font-size="41.25" font-weight="bold" lengthAdjust="spacing" textLength="75.2087" x="2196.3477" y="2627.8367">WS</text><text fill="#FFFFFF" font-family="'Segoe UI'" font-size="41.25" font-weight="bold" lengthAdjust="spacing" textLength="14.361" x="2271.5564" y="2627.8367">&#160;</text><text fill="#FFFFFF" font-family="'Segoe UI'" font-size="41.25" font-weight="bold" lengthAdjust="spacing" textLength="269.5148" x="2285.9174" y="2627.8367">Established</text><text fill="#FFFFFF" font-family="'Segoe UI'" font-size="41.25" lengthAdjust="spacing" textLength="13.1122" x="2555.4321" y="2627.8367">&#160;</text><text fill="#FFFFFF" font-family="'Segoe UI'" font-size="41.25" lengthAdjust="spacing" textLength="24.754" x="2568.5443" y="2627.8367">&#9989;</text></g><g class="message" data-entity-1="part6" data-entity-2="part2" id="msg13"><line style="stroke:#90CAF9;stroke-width:4.5833;" x1="1070.8629" x2="1093.7796" y1="2710.791" y2="2733.7077"/><line style="stroke:#90CAF9;stroke-width:4.5833;" x1="1070.8629" x2="1093.7796" y1="2733.7077" y2="2710.791"/><line style="stroke:#90CAF9;stroke-width:2.2917;" x1="1082.3213" x2="3350.5666" y1="2722.2493" y2="2722.2493"/><text fill="#FFFFFF" font-family="'Segoe UI'" font-size="41.25" lengthAdjust="spacing" textLength="120.6281" x="1962.6139" y="2707.9376">emit('</text><text fill="#FFFFFF" font-family="'Segoe UI'" font-size="41.25" font-weight="bold" lengthAdjust="spacing" textLength="85.9845" x="2083.2419" y="2707.9376">join</text><text fill="#FFFFFF" font-family="'Segoe UI'" font-size="41.25" lengthAdjust="spacing" textLength="27.4329" x="2169.2264" y="2707.9376">')</text><text fill="#FFFFFF" font-family="'Segoe UI'" font-size="41.25" lengthAdjust="spacing" textLength="13.1122" x="2196.6593" y="2707.9376">&#160;</text><text fill="#FFFFFF" font-family="'Segoe UI'" font-size="41.25" lengthAdjust="spacing" textLength="24.754" x="2209.7715" y="2707.9376">&#10060;</text><text fill="#FFFFFF" font-family="'Segoe UI'" font-size="41.25" lengthAdjust="spacing" textLength="13.1122" x="2234.5255" y="2707.9376">&#160;</text><text fill="#FFFFFF" font-family="'Segoe UI'" font-size="41.25" lengthAdjust="spacing" textLength="197.428" x="2247.6377" y="2707.9376">BLOCKED</text></g><rect fill="#455A64" filter="url(#f1jp9n6wadcm8s)" height="6.875" style="stroke:#455A64;stroke-width:2.2917;" width="3672.7539" x="11.4583" y="2794.3831"/><line style="stroke:#000000;stroke-width:1.1458;" x1="11.4583" x2="3684.2122" y1="2794.3831" y2="2794.3831"/><line style="stroke:#000000;stroke-width:1.1458;" x1="11.4583" x2="3684.2122" y1="2801.2581" y2="2801.2581"/><rect fill="#455A64" filter="url(#f1jp9n6wadcm8s)" height="66.3509" style="stroke:#000000;stroke-width:2.2917;" width="979.2623" x="1358.2041" y="2763.4993"/><text fill="#FFFFFF" font-family="'Segoe UI'" font-size="41.25" font-weight="bold" lengthAdjust="spacing" textLength="932.818" x="1371.9541" y="2810.9552">BroadcastChannel (Same Browser Tabs)</text><path d="M252.0833,2864.2253 L252.0833,2971.9336 L3494.7917,2971.9336 L3494.7917,2887.1419 L3471.875,2864.2253 L252.0833,2864.2253" fill="#455A64" filter="url(#f1jp9n6wadcm8s)" style="stroke:#FBC02D;stroke-width:2.2917;"/><path d="M3471.875,2864.2253 L3471.875,2887.1419 L3494.7917,2887.1419 L3471.875,2864.2253" fill="#455A64" style="stroke:#FBC02D;stroke-width:2.2917;"/><text fill="#FFFFFF" font-family="'Segoe UI'" font-size="36.6667" lengthAdjust="spacing" textLength="671.9596" x="1414.096" y="2909.7184">If A and B are tabs in SAME browser:</text><text fill="#FFFFFF" font-family="'Segoe UI'" font-size="36.6667" lengthAdjust="spacing" textLength="891.7985" x="1414.096" y="2952.4007">sync.js also uses BroadcastChannel for fast sync</text><g class="message" data-entity-1="part1" data-entity-2="part2" id="msg14"><polygon fill="#90CAF9" points="1027.3213,3043.4408,1050.2379,3052.6074,1027.3213,3061.7741,1036.4879,3052.6074" style="stroke:#90CAF9;stroke-width:2.2917;"/><line style="stroke:#90CAF9;stroke-width:2.2917;" x1="396.2178" x2="1041.0713" y1="3052.6074" y2="3052.6074"/><text fill="#FFFFFF" font-family="'Segoe UI'" font-size="41.25" lengthAdjust="spacing" textLength="465.1904" x="492.9243" y="3038.2957">BC.postMessage(data)</text></g><path d="M1065.625,3082.3991 L1065.625,3231.3574 L1647.7083,3231.3574 L1647.7083,3105.3158 L1624.7917,3082.3991 L1065.625,3082.3991" fill="#FF5722" filter="url(#f1jp9n6wadcm8s)" style="stroke:#FBC02D;stroke-width:2.2917;"/><path d="M1624.7917,3082.3991 L1624.7917,3105.3158 L1647.7083,3105.3158 L1624.7917,3082.3991" fill="#FF5722" style="stroke:#FBC02D;stroke-width:2.2917;"/><text fill="#FFFFFF" font-family="'Segoe UI'" font-size="36.6667" lengthAdjust="spacing" textLength="535.4622" x="1079.375" y="3127.8923">Message tagged with Tab-ID:</text><text fill="#90CAF9" font-family="'Segoe UI'" font-size="36.6667" lengthAdjust="spacing" textLength="496.1816" x="1079.375" y="3170.5745">{ _empc4_tabId: "abc123",</text><text fill="#90CAF9" font-family="'Segoe UI'" font-size="36.6667" lengthAdjust="spacing" textLength="449.0951" x="1102.6855" y="3213.2568">_empc4_payload: data }</text><g class="message" data-entity-1="part2" data-entity-2="part6" id="msg15"><polygon fill="#90CAF9" points="3325.3583,3304.2969,3348.2749,3313.4635,3325.3583,3322.6302,3334.5249,3313.4635" style="stroke:#90CAF9;stroke-width:2.2917;"/><line style="stroke:#90CAF9;stroke-width:2.2917;" x1="1054.8213" x2="3339.1083" y1="3313.4635" y2="3313.4635"/><text fill="#FFFFFF" font-family="'Segoe UI'" font-size="41.25" lengthAdjust="spacing" textLength="57.1014" x="1998.5163" y="3299.1518">BC</text><text fill="#FFFFFF" font-family="'Segoe UI'" font-size="41.25" lengthAdjust="spacing" textLength="13.1122" x="2055.6177" y="3299.1518">&#160;</text><text fill="#FFFFFF" font-family="'Segoe UI'" font-size="41.25" lengthAdjust="spacing" textLength="185.3833" x="2068.7299" y="3299.1518">message</text><text fill="#FFFFFF" font-family="'Segoe UI'" font-size="41.25" lengthAdjust="spacing" textLength="13.1122" x="2254.1132" y="3299.1518">&#160;</text><text fill="#FFFFFF" font-family="'Segoe UI'" font-size="41.25" lengthAdjust="spacing" textLength="141.9379" x="2267.2254" y="3299.1518">arrives</text></g><path d="M882.2917,3343.2552 L882.2917,3535.7552 L3520,3535.7552 L3520,3366.1719 L3497.0833,3343.2552 L882.2917,3343.2552" fill="#FF5722" filter="url(#f1jp9n6wadcm8s)" style="stroke:#FBC02D;stroke-width:2.2917;"/><path d="M3497.0833,3343.2552 L3497.0833,3366.1719 L3520,3366.1719 L3497.0833,3343.2552" fill="#FF5722" style="stroke:#FBC02D;stroke-width:2.2917;"/><text fill="#FFFFFF" font-family="'Segoe UI'" font-size="36.6667" lengthAdjust="spacing" textLength="251.779" x="1946.6718" y="3388.7484">Tab-ID check:</text><text fill="#FFFFFF" font-family="'Segoe UI'" font-size="36.6667" lengthAdjust="spacing" textLength="483.4163" x="1946.6718" y="3431.4307">&#8226; fromTabId &#8800; own Tab-ID</text><text fill="#FFFFFF" font-family="'Segoe UI'" font-size="36.6667" lengthAdjust="spacing" textLength="406.9141" x="1946.6718" y="3474.113">&#8226; syncEnabled = false</text><text fill="#FFD54F" font-family="'Segoe UI'" font-size="36.6667" font-weight="bold" lengthAdjust="spacing" textLength="447.1257" x="1946.6718" y="3516.7952">&#8594; Message BLOCKED!</text><g class="message" data-entity-1="part6" data-entity-2="part2" id="msg16"><line style="stroke:#90CAF9;stroke-width:4.5833;" x1="1070.8629" x2="1093.7796" y1="3605.5436" y2="3628.4603"/><line style="stroke:#90CAF9;stroke-width:4.5833;" x1="1070.8629" x2="1093.7796" y1="3628.4603" y2="3605.5436"/><line style="stroke:#90CAF9;stroke-width:2.2917;" x1="1082.3213" x2="3350.5666" y1="3617.002" y2="3617.002"/><text fill="#FFFFFF" font-family="'Segoe UI'" font-size="41.25" lengthAdjust="spacing" textLength="24.754" x="2016.1704" y="3602.6902">&#10060;</text><text fill="#FFFFFF" font-family="'Segoe UI'" font-size="41.25" lengthAdjust="spacing" textLength="13.1122" x="2040.9244" y="3602.6902">&#160;</text><text fill="#FFFFFF" font-family="'Segoe UI'" font-size="41.25" lengthAdjust="spacing" textLength="163.3484" x="2054.0366" y="3602.6902">Receive</text><text fill="#FFFFFF" font-family="'Segoe UI'" font-size="41.25" lengthAdjust="spacing" textLength="13.1122" x="2217.385" y="3602.6902">&#160;</text><text fill="#FFFFFF" font-family="'Segoe UI'" font-size="41.25" lengthAdjust="spacing" textLength="161.012" x="2230.4972" y="3602.6902">blocked</text></g><rect fill="#455A64" filter="url(#f1jp9n6wadcm8s)" height="6.875" style="stroke:#455A64;stroke-width:2.2917;" width="3672.7539" x="11.4583" y="3689.1357"/><line style="stroke:#000000;stroke-width:1.1458;" x1="11.4583" x2="3684.2122" y1="3689.1357" y2="3689.1357"/><line style="stroke:#000000;stroke-width:1.1458;" x1="11.4583" x2="3684.2122" y1="3696.0107" y2="3696.0107"/><rect fill="#455A64" filter="url(#f1jp9n6wadcm8s)" height="66.3509" style="stroke:#000000;stroke-width:2.2917;" width="670.5318" x="1512.5694" y="3658.252"/><text fill="#FFFFFF" font-family="'Segoe UI'" font-size="41.25" font-weight="bold" lengthAdjust="spacing" textLength="624.0875" x="1526.3194" y="3705.7078">User Enables Sync (Opt-in)</text><path d="M119.1667,3758.9779 L119.1667,3951.4779 L664.5833,3951.4779 L664.5833,3781.8945 L641.6667,3758.9779 L119.1667,3758.9779" fill="#4CAF50" filter="url(#f1jp9n6wadcm8s)" style="stroke:#FBC02D;stroke-width:2.2917;"/><path d="M641.6667,3758.9779 L641.6667,3781.8945 L664.5833,3781.8945 L641.6667,3758.9779" fill="#4CAF50" style="stroke:#FBC02D;stroke-width:2.2917;"/><text fill="#FFFFFF" font-family="'Segoe UI'" font-size="36.6667" font-weight="bold" lengthAdjust="spacing" textLength="489.2171" x="132.9167" y="3804.471">User A clicks [&#9654;] button</text><text fill="#FFFFFF" font-family="'Segoe UI'" font-size="36.6667" lengthAdjust="spacing" textLength="497.7572" x="132.9167" y="3847.1533">EMPC4_toggleSync() called</text><text fill="#FFFFFF" font-family="'Segoe UI'" font-size="36.6667" lengthAdjust="spacing" textLength="361.6536" x="132.9167" y="3889.8356">syncEnabled = true</text><text fill="#FFFFFF" font-family="'Segoe UI'" font-size="36.6667" lengthAdjust="spacing" textLength="322.0687" x="132.9167" y="3932.5179">UI: &#128994; Sync: On [&#9209;]</text><g class="message" data-entity-1="part1" data-entity-2="part2" id="msg17"><polygon fill="#90CAF9" points="1027.3213,4023.5579,1050.2379,4032.7246,1027.3213,4041.8913,1036.4879,4032.7246" style="stroke:#90CAF9;stroke-width:2.2917;"/><line style="stroke:#90CAF9;stroke-width:2.2917;" x1="396.2178" x2="1041.0713" y1="4032.7246" y2="4032.7246"/><text fill="#FFFFFF" font-family="'Segoe UI'" font-size="41.25" lengthAdjust="spacing" textLength="262.2235" x="594.4078" y="4018.4129">toggleSync()</text></g><g class="message" data-entity-1="part2" data-entity-2="part5" id="msg18"><polygon fill="#90CAF9" points="2686.9165,4103.6589,2709.8332,4112.8255,2686.9165,4121.9922,2696.0832,4112.8255" style="stroke:#90CAF9;stroke-width:2.2917;"/><line style="stroke:#90CAF9;stroke-width:2.2917;" x1="1054.8213" x2="2700.6665" y1="4112.8255" y2="4112.8255"/><text fill="#FFFFFF" font-family="'Segoe UI'" font-size="41.25" lengthAdjust="spacing" textLength="120.6281" x="1526.5616" y="4098.5138">emit('</text><text fill="#FFFFFF" font-family="'Segoe UI'" font-size="41.25" font-weight="bold" lengthAdjust="spacing" textLength="85.9845" x="1647.1897" y="4098.5138">join</text><text fill="#FFFFFF" font-family="'Segoe UI'" font-size="41.25" lengthAdjust="spacing" textLength="24.4519" x="1733.1742" y="4098.5138">',</text><text fill="#FFFFFF" font-family="'Segoe UI'" font-size="41.25" lengthAdjust="spacing" textLength="13.1122" x="1757.6261" y="4098.5138">&#160;</text><text fill="#FFFFFF" font-family="'Segoe UI'" font-size="41.25" lengthAdjust="spacing" textLength="26.2445" x="1770.7383" y="4098.5138">{</text><text fill="#FFFFFF" font-family="'Segoe UI'" font-size="41.25" lengthAdjust="spacing" textLength="13.1122" x="1796.9828" y="4098.5138">&#160;</text><text fill="#FFFFFF" font-family="'Segoe UI'" font-size="41.25" lengthAdjust="spacing" textLength="121.5143" x="1810.095" y="4098.5138">room:</text><text fill="#FFFFFF" font-family="'Segoe UI'" font-size="41.25" lengthAdjust="spacing" textLength="13.1122" x="1931.6092" y="4098.5138">&#160;</text><text fill="#FFFFFF" font-family="'Segoe UI'" font-size="41.25" lengthAdjust="spacing" textLength="204.6387" x="1944.7214" y="4098.5138">"SyfFKj..."</text><text fill="#FFFFFF" font-family="'Segoe UI'" font-size="41.25" lengthAdjust="spacing" textLength="13.1122" x="2149.3601" y="4098.5138">&#160;</text><text fill="#FFFFFF" font-family="'Segoe UI'" font-size="41.25" lengthAdjust="spacing" textLength="42.3376" x="2162.4723" y="4098.5138">})</text><text fill="#FFFFFF" font-family="'Segoe UI'" font-size="41.25" lengthAdjust="spacing" textLength="13.1122" x="2204.8099" y="4098.5138">&#160;</text><text fill="#FFFFFF" font-family="'Segoe UI'" font-size="41.25" lengthAdjust="spacing" textLength="24.754" x="2217.9221" y="4098.5138">&#9989;</text></g><path d="M2724.7917,4142.6172 L2724.7917,4291.5755 L3384.7917,4291.5755 L3384.7917,4165.5339 L3361.875,4142.6172 L2724.7917,4142.6172" fill="#43A047" filter="url(#f1jp9n6wadcm8s)" style="stroke:#FBC02D;stroke-width:2.2917;"/><path d="M3361.875,4142.6172 L3361.875,4165.5339 L3384.7917,4165.5339 L3361.875,4142.6172" fill="#43A047" style="stroke:#FBC02D;stroke-width:2.2917;"/><text fill="#FFFFFF" font-family="'Segoe UI'" font-size="36.6667" lengthAdjust="spacing" textLength="132.5944" x="2738.5417" y="4188.1104">Server:</text><text fill="#FFFFFF" font-family="'Segoe UI'" font-size="36.6667" lengthAdjust="spacing" textLength="304.3083" x="2738.5417" y="4230.7926">join_room(room)</text><text fill="#FFFFFF" font-family="'Segoe UI'" font-size="36.6667" lengthAdjust="spacing" textLength="612.5374" x="2738.5417" y="4273.4749">rooms_data[room].users.add(sid)</text><path d="M3031.875,4323.3724 L3031.875,4431.0807 L3664.375,4431.0807 L3664.375,4346.2891 L3641.4583,4323.3724 L3031.875,4323.3724" fill="#4CAF50" filter="url(#f1jp9n6wadcm8s)" style="stroke:#FBC02D;stroke-width:2.2917;"/><path d="M3641.4583,4323.3724 L3641.4583,4346.2891 L3664.375,4346.2891 L3641.4583,4323.3724" fill="#4CAF50" style="stroke:#FBC02D;stroke-width:2.2917;"/><text fill="#FFFFFF" font-family="'Segoe UI'" font-size="36.6667" font-weight="bold" lengthAdjust="spacing" textLength="585.8789" x="3045.625" y="4368.8656">User B also clicks [&#9654;] button</text><text fill="#FFFFFF" font-family="'Segoe UI'" font-size="36.6667" lengthAdjust="spacing" textLength="460.6071" x="3045.625" y="4411.5479">Both users now opted in!</text><g class="message" data-entity-1="part6" data-entity-2="part2" id="msg19"><polygon fill="#90CAF9" points="1080.0296,4502.5879,1057.1129,4511.7546,1080.0296,4520.9212,1070.8629,4511.7546" style="stroke:#90CAF9;stroke-width:2.2917;"/><line style="stroke:#90CAF9;stroke-width:2.2917;" x1="1066.2796" x2="3350.5666" y1="4511.7546" y2="4511.7546"/><text fill="#FFFFFF" font-family="'Segoe UI'" font-size="41.25" lengthAdjust="spacing" textLength="262.2235" x="2072.728" y="4497.4428">toggleSync()</text></g><g class="message" data-entity-1="part2" data-entity-2="part5" id="msg20"><polygon fill="#90CAF9" points="2686.9165,4582.6888,2709.8332,4591.8555,2686.9165,4601.0221,2696.0832,4591.8555" style="stroke:#90CAF9;stroke-width:2.2917;"/><line style="stroke:#90CAF9;stroke-width:2.2917;" x1="1054.8213" x2="2700.6665" y1="4591.8555" y2="4591.8555"/><text fill="#FFFFFF" font-family="'Segoe UI'" font-size="41.25" lengthAdjust="spacing" textLength="120.6281" x="1526.5616" y="4577.5437">emit('</text><text fill="#FFFFFF" font-family="'Segoe UI'" font-size="41.25" font-weight="bold" lengthAdjust="spacing" textLength="85.9845" x="1647.1897" y="4577.5437">join</text><text fill="#FFFFFF" font-family="'Segoe UI'" font-size="41.25" lengthAdjust="spacing" textLength="24.4519" x="1733.1742" y="4577.5437">',</text><text fill="#FFFFFF" font-family="'Segoe UI'" font-size="41.25" lengthAdjust="spacing" textLength="13.1122" x="1757.6261" y="4577.5437">&#160;</text><text fill="#FFFFFF" font-family="'Segoe UI'" font-size="41.25" lengthAdjust="spacing" textLength="26.2445" x="1770.7383" y="4577.5437">{</text><text fill="#FFFFFF" font-family="'Segoe UI'" font-size="41.25" lengthAdjust="spacing" textLength="13.1122" x="1796.9828" y="4577.5437">&#160;</text><text fill="#FFFFFF" font-family="'Segoe UI'" font-size="41.25" lengthAdjust="spacing" textLength="121.5143" x="1810.095" y="4577.5437">room:</text><text fill="#FFFFFF" font-family="'Segoe UI'" font-size="41.25" lengthAdjust="spacing" textLength="13.1122" x="1931.6092" y="4577.5437">&#160;</text><text fill="#FFFFFF" font-family="'Segoe UI'" font-size="41.25" lengthAdjust="spacing" textLength="204.6387" x="1944.7214" y="4577.5437">"SyfFKj..."</text><text fill="#FFFFFF" font-family="'Segoe UI'" font-size="41.25" lengthAdjust="spacing" textLength="13.1122" x="2149.3601" y="4577.5437">&#160;</text><text fill="#FFFFFF" font-family="'Segoe UI'" font-size="41.25" lengthAdjust="spacing" textLength="42.3376" x="2162.4723" y="4577.5437">})</text><text fill="#FFFFFF" font-family="'Segoe UI'" font-size="41.25" lengthAdjust="spacing" textLength="13.1122" x="2204.8099" y="4577.5437">&#160;</text><text fill="#FFFFFF" font-family="'Segoe UI'" font-size="41.25" lengthAdjust="spacing" textLength="24.754" x="2217.9221" y="4577.5437">&#9989;</text></g><path d="M2724.7917,4621.6471 L2724.7917,4685.8138 L3251.875,4685.8138 L3251.875,4644.5638 L3228.9583,4621.6471 L2724.7917,4621.6471" fill="#43A047" filter="url(#f1jp9n6wadcm8s)" style="stroke:#FBC02D;stroke-width:2.2917;"/><path d="M3228.9583,4621.6471 L3228.9583,4644.5638 L3251.875,4644.5638 L3228.9583,4621.6471" fill="#43A047" style="stroke:#FBC02D;stroke-width:2.2917;"/><text fill="#FFFFFF" font-family="'Segoe UI'" font-size="36.6667" lengthAdjust="spacing" textLength="480.5697" x="2738.5417" y="4667.1403">Both clients in same room</text><rect fill="#455A64" filter="url(#f1jp9n6wadcm8s)" height="6.875" style="stroke:#455A64;stroke-width:2.2917;" width="3672.7539" x="11.4583" y="4759.3799"/><line style="stroke:#000000;stroke-width:1.1458;" x1="11.4583" x2="3684.2122" y1="4759.3799" y2="4759.3799"/><line style="stroke:#000000;stroke-width:1.1458;" x1="11.4583" x2="3684.2122" y1="4766.2549" y2="4766.2549"/><rect fill="#455A64" filter="url(#f1jp9n6wadcm8s)" height="66.3509" style="stroke:#000000;stroke-width:2.2917;" width="744.3105" x="1475.68" y="4728.4961"/><text fill="#FFFFFF" font-family="'Segoe UI'" font-size="41.25" font-weight="bold" lengthAdjust="spacing" textLength="697.8662" x="1489.43" y="4775.9519">Diagram Sync (Both Opted In)</text><path d="M107.7083,4829.222 L107.7083,4936.9303 L673.75,4936.9303 L673.75,4852.1387 L650.8333,4829.222 L107.7083,4829.222" fill="#1E88E5" filter="url(#f1jp9n6wadcm8s)" style="stroke:#FBC02D;stroke-width:2.2917;"/><path d="M650.8333,4829.222 L650.8333,4852.1387 L673.75,4852.1387 L650.8333,4829.222" fill="#1E88E5" style="stroke:#FBC02D;stroke-width:2.2917;"/><text fill="#FFFFFF" font-family="'Segoe UI'" font-size="36.6667" lengthAdjust="spacing" textLength="397.6221" x="121.4583" y="4874.7152">User A types in editor</text><text fill="#FFFFFF" font-family="'Segoe UI'" font-size="36.6667" lengthAdjust="spacing" textLength="519.2594" x="121.4583" y="4917.3975">Monaco.onChange &#8594; sync.js</text><g class="message" data-entity-1="part1" data-entity-2="part2" id="msg21"><polygon fill="#90CAF9" points="1027.3213,5008.4375,1050.2379,5017.6042,1027.3213,5026.7708,1036.4879,5017.6042" style="stroke:#90CAF9;stroke-width:2.2917;"/><line style="stroke:#90CAF9;stroke-width:2.2917;" x1="396.2178" x2="1041.0713" y1="5017.6042" y2="5017.6042"/><text fill="#FFFFFF" font-family="'Segoe UI'" font-size="41.25" lengthAdjust="spacing" textLength="482.5726" x="423.7178" y="5003.2924">emit('diagram_update',</text><text fill="#FFFFFF" font-family="'Segoe UI'" font-size="41.25" lengthAdjust="spacing" textLength="13.1122" x="906.2904" y="5003.2924">&#160;</text><text fill="#FFFFFF" font-family="'Segoe UI'" font-size="41.25" lengthAdjust="spacing" textLength="107.9187" x="919.4026" y="5003.2924">{...})</text></g><path d="M1065.625,5047.3958 L1065.625,5111.5625 L1645.4167,5111.5625 L1645.4167,5070.3125 L1622.5,5047.3958 L1065.625,5047.3958" fill="#4CAF50" filter="url(#f1jp9n6wadcm8s)" style="stroke:#FBC02D;stroke-width:2.2917;"/><path d="M1622.5,5047.3958 L1622.5,5070.3125 L1645.4167,5070.3125 L1622.5,5047.3958" fill="#4CAF50" style="stroke:#FBC02D;stroke-width:2.2917;"/><text fill="#FFFFFF" font-family="'Segoe UI'" font-size="36.6667" lengthAdjust="spacing" textLength="533.4749" x="1079.375" y="5092.889">syncEnabled=true &#8594; allowed</text><g class="message" data-entity-1="part2" data-entity-2="part5" id="msg22"><polygon fill="#90CAF9" points="2686.9165,5279.9642,2709.8332,5289.1309,2686.9165,5298.2975,2696.0832,5289.1309" style="stroke:#90CAF9;stroke-width:2.2917;"/><line style="stroke:#90CAF9;stroke-width:2.2917;" x1="1054.8213" x2="2700.6665" y1="5289.1309" y2="5289.1309"/><text fill="#FFFFFF" font-family="'Segoe UI'" font-size="41.25" lengthAdjust="spacing" textLength="120.6281" x="1604.0162" y="5178.784">emit('</text><text fill="#FFFFFF" font-family="'Segoe UI'" font-size="41.25" font-weight="bold" lengthAdjust="spacing" textLength="376.7688" x="1724.6442" y="5178.784">diagram_update</text><text fill="#FFFFFF" font-family="'Segoe UI'" font-size="41.25" lengthAdjust="spacing" textLength="24.4519" x="2101.413" y="5178.784">',</text><text fill="#FFFFFF" font-family="'Segoe UI'" font-size="41.25" lengthAdjust="spacing" textLength="13.1122" x="2125.8649" y="5178.784">&#160;</text><text fill="#FFFFFF" font-family="'Segoe UI'" font-size="41.25" lengthAdjust="spacing" textLength="26.2445" x="2138.9771" y="5178.784">{</text><text fill="#FFFFFF" font-family="'Segoe UI'" font-size="41.25" lengthAdjust="spacing" textLength="26.2244" x="1695.318" y="5226.8016">&#160;&#160;</text><text fill="#FFFFFF" font-family="'Segoe UI'" font-size="41.25" lengthAdjust="spacing" textLength="121.5143" x="1721.5424" y="5226.8016">room:</text><text fill="#FFFFFF" font-family="'Segoe UI'" font-size="41.25" lengthAdjust="spacing" textLength="13.1122" x="1843.0567" y="5226.8016">&#160;</text><text fill="#FFFFFF" font-family="'Segoe UI'" font-size="41.25" lengthAdjust="spacing" textLength="217.7509" x="1856.1689" y="5226.8016">"SyfFKj...",</text><text fill="#FFFFFF" font-family="'Segoe UI'" font-size="41.25" lengthAdjust="spacing" textLength="26.2244" x="1807.4463" y="5274.8191">&#160;&#160;</text><text fill="#FFFFFF" font-family="'Segoe UI'" font-size="41.25" lengthAdjust="spacing" textLength="96.0352" x="1833.6707" y="5274.8191">text:</text><text fill="#FFFFFF" font-family="'Segoe UI'" font-size="41.25" lengthAdjust="spacing" textLength="13.1122" x="1929.7059" y="5274.8191">&#160;</text><text fill="#FFFFFF" font-family="'Segoe UI'" font-size="41.25" lengthAdjust="spacing" textLength="18.9734" x="1942.818" y="5274.8191">"</text></g><path d="M2724.7917,5318.9225 L2724.7917,5511.4225 L3350.4167,5511.4225 L3350.4167,5341.8392 L3327.5,5318.9225 L2724.7917,5318.9225" fill="#43A047" filter="url(#f1jp9n6wadcm8s)" style="stroke:#FBC02D;stroke-width:2.2917;"/><path d="M3327.5,5318.9225 L3327.5,5341.8392 L3350.4167,5341.8392 L3327.5,5318.9225" fill="#43A047" style="stroke:#FBC02D;stroke-width:2.2917;"/><text fill="#FFFFFF" font-family="'Segoe UI'" font-size="36.6667" lengthAdjust="spacing" textLength="579.3262" x="2738.5417" y="5364.4157">Handler _on_diagram_update():</text><text fill="#FFFFFF" font-family="'Segoe UI'" font-size="36.6667" lengthAdjust="spacing" textLength="517.6839" x="2738.5417" y="5407.098">&#8226; Update rooms_data[room]</text><text fill="#FFFFFF" font-family="'Segoe UI'" font-size="36.6667" lengthAdjust="spacing" textLength="373.5775" x="2738.5417" y="5449.7803">&#8226; Broadcast to room</text><text fill="#FFD54F" font-family="'Segoe UI'" font-size="36.6667" font-weight="bold" lengthAdjust="spacing" textLength="428.8102" x="2738.5417" y="5492.4626">skip_sid=request.sid</text><g class="message" data-entity-1="part5" data-entity-2="part6" id="msg23"><polygon fill="#90CAF9" points="3325.3583,5631.5202,3348.2749,5640.6868,3325.3583,5649.8535,3334.5249,5640.6868" style="stroke:#90CAF9;stroke-width:2.2917;"/><line style="stroke:#90CAF9;stroke-width:2.2917;" x1="2714.4165" x2="3339.1083" y1="5640.6868" y2="5640.6868"/><text fill="#FFFFFF" font-family="'Segoe UI'" font-size="41.25" lengthAdjust="spacing" textLength="120.6281" x="2753.0347" y="5578.3575">emit('</text><text fill="#FFFFFF" font-family="'Segoe UI'" font-size="41.25" font-weight="bold" lengthAdjust="spacing" textLength="376.7688" x="2873.6627" y="5578.3575">diagram_update</text><text fill="#FFFFFF" font-family="'Segoe UI'" font-size="41.25" lengthAdjust="spacing" textLength="24.4519" x="3250.4315" y="5578.3575">',</text><text fill="#FFFFFF" font-family="'Segoe UI'" font-size="41.25" lengthAdjust="spacing" textLength="13.1122" x="3274.8834" y="5578.3575">&#160;</text><text fill="#FFFFFF" font-family="'Segoe UI'" font-size="41.25" lengthAdjust="spacing" textLength="26.2445" x="3287.9956" y="5578.3575">{</text><text fill="#FFFFFF" font-family="'Segoe UI'" font-size="41.25" lengthAdjust="spacing" textLength="26.2244" x="2956.4648" y="5626.3751">&#160;&#160;</text><text fill="#FFFFFF" font-family="'Segoe UI'" font-size="41.25" lengthAdjust="spacing" textLength="96.0352" x="2982.6892" y="5626.3751">text:</text><text fill="#FFFFFF" font-family="'Segoe UI'" font-size="41.25" lengthAdjust="spacing" textLength="13.1122" x="3078.7244" y="5626.3751">&#160;</text><text fill="#FFFFFF" font-family="'Segoe UI'" font-size="41.25" lengthAdjust="spacing" textLength="18.9734" x="3091.8365" y="5626.3751">"</text></g><path d="M3047.9167,5670.4785 L3047.9167,5819.4368 L3646.0417,5819.4368 L3646.0417,5693.3952 L3623.125,5670.4785 L3047.9167,5670.4785" fill="#1E88E5" filter="url(#f1jp9n6wadcm8s)" style="stroke:#FBC02D;stroke-width:2.2917;"/><path d="M3623.125,5670.4785 L3623.125,5693.3952 L3646.0417,5693.3952 L3623.125,5670.4785" fill="#1E88E5" style="stroke:#FBC02D;stroke-width:2.2917;"/><text fill="#FFFFFF" font-family="'Segoe UI'" font-size="36.6667" lengthAdjust="spacing" textLength="431.5495" x="3061.6667" y="5715.9717">sync.js receives update</text><text fill="#FFFFFF" font-family="'Segoe UI'" font-size="36.6667" lengthAdjust="spacing" textLength="551.8441" x="3061.6667" y="5758.654">&#8594; Monaco.setValue(data.text)</text><text fill="#4CAF50" font-family="'Segoe UI'" font-size="36.6667" font-weight="bold" lengthAdjust="spacing" textLength="478.5824" x="3061.6667" y="5801.3363">Diagram synchronized!</text><text fill="#4CAF50" font-family="'Segoe UI'" font-size="36.6667" lengthAdjust="spacing" textLength="22.0036" x="3551.9043" y="5801.3363">&#9989;</text><rect fill="#455A64" filter="url(#f1jp9n6wadcm8s)" height="6.875" style="stroke:#455A64;stroke-width:2.2917;" width="3672.7539" x="11.4583" y="5893.5758"/><line style="stroke:#000000;stroke-width:1.1458;" x1="11.4583" x2="3684.2122" y1="5893.5758" y2="5893.5758"/><line style="stroke:#000000;stroke-width:1.1458;" x1="11.4583" x2="3684.2122" y1="5900.4508" y2="5900.4508"/><rect fill="#455A64" filter="url(#f1jp9n6wadcm8s)" height="66.3509" style="stroke:#000000;stroke-width:2.2917;" width="488.915" x="1603.3778" y="5862.6921"/><text fill="#FFFFFF" font-family="'Segoe UI'" font-size="41.25" font-weight="bold" lengthAdjust="spacing" textLength="442.4707" x="1617.1278" y="5910.1479">User Disables Sync</text><path d="M126.0417,5963.418 L126.0417,6112.3763 L655.4167,6112.3763 L655.4167,5986.3346 L632.5,5963.418 L126.0417,5963.418" fill="#FF5722" filter="url(#f1jp9n6wadcm8s)" style="stroke:#FBC02D;stroke-width:2.2917;"/><path d="M632.5,5963.418 L632.5,5986.3346 L655.4167,5986.3346 L632.5,5963.418" fill="#FF5722" style="stroke:#FBC02D;stroke-width:2.2917;"/><text fill="#FFFFFF" font-family="'Segoe UI'" font-size="36.6667" font-weight="bold" lengthAdjust="spacing" textLength="483.0225" x="139.7917" y="6008.9111">User A clicks [&#9209;] button</text><text fill="#FFFFFF" font-family="'Segoe UI'" font-size="36.6667" lengthAdjust="spacing" textLength="373.6312" x="139.7917" y="6051.5934">syncEnabled = false</text><text fill="#FFFFFF" font-family="'Segoe UI'" font-size="36.6667" lengthAdjust="spacing" textLength="330.8415" x="139.7917" y="6094.2757">UI: &#128993; Sync: Off [&#9654;]</text><g class="message" data-entity-1="part1" data-entity-2="part2" id="msg24"><polygon fill="#90CAF9" points="1027.3213,6185.3158,1050.2379,6194.4824,1027.3213,6203.6491,1036.4879,6194.4824" style="stroke:#90CAF9;stroke-width:2.2917;"/><line style="stroke:#90CAF9;stroke-width:2.2917;" x1="396.2178" x2="1041.0713" y1="6194.4824" y2="6194.4824"/><text fill="#FFFFFF" font-family="'Segoe UI'" font-size="41.25" lengthAdjust="spacing" textLength="262.2235" x="594.4078" y="6180.1707">toggleSync()</text></g><g class="message" data-entity-1="part2" data-entity-2="part5" id="msg25"><polygon fill="#90CAF9" points="2686.9165,6265.4167,2709.8332,6274.5833,2686.9165,6283.75,2696.0832,6274.5833" style="stroke:#90CAF9;stroke-width:2.2917;"/><line style="stroke:#90CAF9;stroke-width:2.2917;" x1="1054.8213" x2="2700.6665" y1="6274.5833" y2="6274.5833"/><text fill="#FFFFFF" font-family="'Segoe UI'" font-size="41.25" lengthAdjust="spacing" textLength="120.6281" x="1526.0782" y="6260.2716">emit('</text><text fill="#FFFFFF" font-family="'Segoe UI'" font-size="41.25" font-weight="bold" lengthAdjust="spacing" textLength="124.8175" x="1646.7063" y="6260.2716">leave</text><text fill="#FFFFFF" font-family="'Segoe UI'" font-size="41.25" lengthAdjust="spacing" textLength="24.4519" x="1771.5238" y="6260.2716">',</text><text fill="#FFFFFF" font-family="'Segoe UI'" font-size="41.25" lengthAdjust="spacing" textLength="13.1122" x="1795.9757" y="6260.2716">&#160;</text><text fill="#FFFFFF" font-family="'Segoe UI'" font-size="41.25" lengthAdjust="spacing" textLength="26.2445" x="1809.0879" y="6260.2716">{</text><text fill="#FFFFFF" font-family="'Segoe UI'" font-size="41.25" lengthAdjust="spacing" textLength="13.1122" x="1835.3324" y="6260.2716">&#160;</text><text fill="#FFFFFF" font-family="'Segoe UI'" font-size="41.25" lengthAdjust="spacing" textLength="121.5143" x="1848.4446" y="6260.2716">room:</text><text fill="#FFFFFF" font-family="'Segoe UI'" font-size="41.25" lengthAdjust="spacing" textLength="13.1122" x="1969.9589" y="6260.2716">&#160;</text><text fill="#FFFFFF" font-family="'Segoe UI'" font-size="41.25" lengthAdjust="spacing" textLength="204.6387" x="1983.071" y="6260.2716">"SyfFKj..."</text><text fill="#FFFFFF" font-family="'Segoe UI'" font-size="41.25" lengthAdjust="spacing" textLength="13.1122" x="2187.7097" y="6260.2716">&#160;</text><text fill="#FFFFFF" font-family="'Segoe UI'" font-size="41.25" lengthAdjust="spacing" textLength="42.3376" x="2200.8219" y="6260.2716">})</text></g><path d="M2724.7917,6304.375 L2724.7917,6412.0833 L3109.7917,6412.0833 L3109.7917,6327.2917 L3086.875,6304.375 L2724.7917,6304.375" fill="#43A047" filter="url(#f1jp9n6wadcm8s)" style="stroke:#FBC02D;stroke-width:2.2917;"/><path d="M3086.875,6304.375 L3086.875,6327.2917 L3109.7917,6327.2917 L3086.875,6304.375" fill="#43A047" style="stroke:#FBC02D;stroke-width:2.2917;"/><text fill="#FFFFFF" font-family="'Segoe UI'" font-size="36.6667" lengthAdjust="spacing" textLength="337.7344" x="2738.5417" y="6349.8682">leave_room(room)</text><text fill="#FFFFFF" font-family="'Segoe UI'" font-size="36.6667" lengthAdjust="spacing" textLength="289.9495" x="2738.5417" y="6392.5505">emit('user_left')</text><g class="message" data-entity-1="part5" data-entity-2="part6" id="msg26"><polygon fill="#90CAF9" points="3325.3583,6483.5905,3348.2749,6492.7572,3325.3583,6501.9238,3334.5249,6492.7572" style="stroke:#90CAF9;stroke-width:2.2917;"/><line style="stroke:#90CAF9;stroke-width:2.2917;" x1="2714.4165" x2="3339.1083" y1="6492.7572" y2="6492.7572"/><text fill="#FFFFFF" font-family="'Segoe UI'" font-size="41.25" lengthAdjust="spacing" textLength="323.2123" x="2741.9165" y="6478.4454">emit('user_left',</text><text fill="#FFFFFF" font-family="'Segoe UI'" font-size="41.25" lengthAdjust="spacing" textLength="13.1122" x="3065.1288" y="6478.4454">&#160;</text><text fill="#FFFFFF" font-family="'Segoe UI'" font-size="41.25" lengthAdjust="spacing" textLength="26.2445" x="3078.241" y="6478.4454">{</text><text fill="#FFFFFF" font-family="'Segoe UI'" font-size="41.25" lengthAdjust="spacing" textLength="13.1122" x="3104.4855" y="6478.4454">&#160;</text><text fill="#FFFFFF" font-family="'Segoe UI'" font-size="41.25" lengthAdjust="spacing" textLength="73.0334" x="3117.5977" y="6478.4454">sid:</text><text fill="#FFFFFF" font-family="'Segoe UI'" font-size="41.25" lengthAdjust="spacing" textLength="13.1122" x="3190.6311" y="6478.4454">&#160;</text><text fill="#FFFFFF" font-family="'Segoe UI'" font-size="41.25" lengthAdjust="spacing" textLength="66.1652" x="3203.7433" y="6478.4454">"A"</text><text fill="#FFFFFF" font-family="'Segoe UI'" font-size="41.25" lengthAdjust="spacing" textLength="13.1122" x="3269.9084" y="6478.4454">&#160;</text><text fill="#FFFFFF" font-family="'Segoe UI'" font-size="41.25" lengthAdjust="spacing" textLength="42.3376" x="3283.0206" y="6478.4454">})</text></g><path d="M146.6667,6522.5488 L146.6667,6630.2572 L634.7917,6630.2572 L634.7917,6545.4655 L611.875,6522.5488 L146.6667,6522.5488" fill="#FF5722" filter="url(#f1jp9n6wadcm8s)" style="stroke:#FBC02D;stroke-width:2.2917;"/><path d="M611.875,6522.5488 L611.875,6545.4655 L634.7917,6545.4655 L611.875,6522.5488" fill="#FF5722" style="stroke:#FBC02D;stroke-width:2.2917;"/><text fill="#FFFFFF" font-family="'Segoe UI'" font-size="36.6667" lengthAdjust="spacing" textLength="399.8779" x="160.4167" y="6568.042">A is now in solo mode</text><text fill="#FFFFFF" font-family="'Segoe UI'" font-size="36.6667" lengthAdjust="spacing" textLength="441.0921" x="160.4167" y="6610.7243">Changes no longer sync</text><rect fill="#455A64" filter="url(#f1jp9n6wadcm8s)" height="6.875" style="stroke:#455A64;stroke-width:2.2917;" width="3672.7539" x="11.4583" y="6702.9639"/><line style="stroke:#000000;stroke-width:1.1458;" x1="11.4583" x2="3684.2122" y1="6702.9639" y2="6702.9639"/><line style="stroke:#000000;stroke-width:1.1458;" x1="11.4583" x2="3684.2122" y1="6709.8389" y2="6709.8389"/><rect fill="#455A64" filter="url(#f1jp9n6wadcm8s)" height="66.3509" style="stroke:#000000;stroke-width:2.2917;" width="217.1041" x="1739.2832" y="6672.0801"/><text fill="#FFFFFF" font-family="'Segoe UI'" font-size="41.25" font-weight="bold" lengthAdjust="spacing" textLength="170.6598" x="1753.0332" y="6719.5359">Legend</text><path d="M252.0833,6772.806 L252.0833,7178.431 L3494.7917,7178.431 L3494.7917,6795.7227 L3471.875,6772.806 L252.0833,6772.806" fill="#37474F" filter="url(#f1jp9n6wadcm8s)" style="stroke:#FBC02D;stroke-width:2.2917;"/><path d="M3471.875,6772.806 L3471.875,6795.7227 L3494.7917,6795.7227 L3471.875,6772.806" fill="#37474F" style="stroke:#FBC02D;stroke-width:2.2917;"/><text fill="#FFFFFF" font-family="'Segoe UI'" font-size="36.6667" font-weight="bold" lengthAdjust="spacing" textLength="429.0967" x="1334.1204" y="6818.2992">Privacy First Design:</text><text fill="#FFFFFF" font-family="'Segoe UI'" font-size="36.6667" lengthAdjust="spacing" textLength="832.9134" x="1334.1204" y="6860.9814">&#8226; Sync OFF by default (no automatic sharing)</text><text fill="#FFFFFF" font-family="'Segoe UI'" font-size="36.6667" lengthAdjust="spacing" textLength="627.8809" x="1334.1204" y="6903.6637">&#8226; Both users must explicitly opt-in</text><text fill="#FFFFFF" font-family="'Segoe UI'" font-size="36.6667" lengthAdjust="spacing" textLength="870.153" x="1334.1204" y="6946.346">&#8226; No persistence (each tab starts in solo mode)</text><text fill="#FFFFFF" font-family="'Segoe UI'" font-size="36.6667" lengthAdjust="spacing" textLength="1051.7497" x="1334.1204" y="6989.0283">&#8226; Internal communication (editor&#8596;preview) always works</text><text fill="#333333" font-family="'Segoe UI'" font-size="36.6667" lengthAdjust="spacing" textLength="11.6553" x="1334.1204" y="7031.7106">&#160;</text><text fill="#FFFFFF" font-family="'Segoe UI'" font-size="36.6667" font-weight="bold" lengthAdjust="spacing" textLength="359.8633" x="1334.1204" y="7074.3929">Intercepted APIs:</text><text fill="#FFFFFF" font-family="'Segoe UI'" font-size="36.6667" lengthAdjust="spacing" textLength="758.1299" x="1334.1204" y="7117.0752">&#8226; window.io() - blocks Socket.IO join/emit</text><text fill="#FFFFFF" font-family="'Segoe UI'" font-size="36.6667" lengthAdjust="spacing" textLength="952.0443" x="1334.1204" y="7159.7575">&#8226; window.BroadcastChannel - Tab-ID based filtering</text><?plantuml-src lLdRRXl94NtdLvHb82AvvaKtIoOi1RpQz4ehGvJMGDO6qPnfacqDkoVTJL5Qmq1Uia20006284y9DjcF293VqHVa4rBTFKFDYCEByX094CYPgkhggdEgkbhFz9XEA8G1OJodhXaFYIGJy4C6kxlLn9C1yQv7KaovtnI1aF1yzz3y9YGqqm7j2AuZWOxzIHgbGp8Dz2gHkOqU-v72tb7YbHeJNymO7u6MKvfjzZk2UzdgqP6WSDNToXQofdUIfdlqjrFAFNf6bI8ZMW_OY8D7kQOo8NL1LIYuYgKQD12pkfHYzjYXCt8RoTYb3WwgkPpT61IBxmF2zTNPAM040Z8GacWcE9JW0ntqX7TDDNJGBioO7iDvg4kCeoYkodMn-96_LcYnjbiz-PvAPHHtoWVb7LH_BzaDyUwWmwJIhoj6x2GMttbvCa9pqq7P4vFAE_4R4WuhxRFtpVsIX_70p5E9SdxfXgaf2TYFrgSIvJTC2Zx1fHSDdh8R2kgEUsCKYJHWGFMCKWvw9i0B62ego4iCBfDK0RqD0-On3PxRJo6ocak43lzgb0anIF0b1_ZJU8oxlSFzm_sEUoUaJsNq_F3eLVLLqpvVHDZNv29SQBhCEWgtseUBrZkDPdMtzTZwdlsPFtN8UfbUJKNWYbQqY8dKNrMRzSuh-_YK3Uaf9cBPbkRl7pkyVt1GVxblPLhiXg7o1YAB0J8ltw1Ik2hUJc29X_PbPkIJITrguFOLbL3_oFCV64TAgy8M40LrUBxJFZfg7wJbFSiJ2rGfWl9dXNfTmqoFXbf8f-jf6PWL3mvtTzFgRuNIm4UCttxajQEgbRPVZVXHfrfDYrzAGeVisiZkL9sqTe_WURsnVzXefkL3G-Vf92WPAg3MGRMwOxNCTupyNhswVvWTW0Pkv6emHNMtXyPy_xdZO-XofjcSYt1ydCjPs8eR4xiNHZgHrjUUYNajYlb9Gs3nY0aO2EA3CeNnwkAqzhfYHKzIQWw79sEjmrgbGgGtBWV28q45TrOP2ZcfbClbJCremVkV_WmziyI549DIjmNveHGJio0oMeyvlYhCzIdtBGLpkJgKJg9irE1D-n9I2qB-xUNPQS7jMxBHMCVqHEbtLEixv9QymSfo9ZZn17nZesuXKYn-0ml8GOFjUWiO_qmzJVs2AQYeOwjkcOdoX74hrUrssZ2J90nH29ryNIhDlJGkuKBlUgbypB6N4PjYST4HanC5dUv5xx9MBAwCxEz-WVT4UsFSvipI1JtD5vweWfWZlaUKReu9vpHOf_w6OaiW6WrSekDT4pECjJ8TfuUamywspa9JKgj_rQt1Vtx--P_GmzJKu7muX1_k__glJnbeQ6o4XiQoT21f7deejaoEIJRKUQWMcCr58gLAHyPc8aW1qY5GO68F1ktimUYpLPnow89ZexaT4GntKqaLZksL-Lo4Zy6cYe5B9qpdrxAhMFpGWwjm98bF3UvjVEVGh_owtJq_tlyLrZgEXnofZsTquDxcd0Kq5HV26eHItDxrGw8KnXxjZYbQbIeNIw2mhNyrh0TJJMkGsct96MOYPuLAA5sFFMmhJGO1KsFg5ujm_xVV_s_Pge6DolPdmVZs2_WYiIpLO0i3l_LrMQnR1_k6h2QvZTFpvhVj5Wpk5el8izLy3J7-U4PzXmktY2QWa2xK1qGn14W8kKhtgek7N6mEZncp9BUtBXhnNej5izjYSHi1-lS_ndj8LaynJCKFDHyvO5Q4yqx78jnOCwk1iWV0o8KqIzEeWhnjCqCylnPYsA1mOtbo6njlmz3xSHM3lEqvSKF5KgKAJ-oKtI5YZs1O6q0a1VHFcLhNgv-rOU3irbQbBAuE9502fbWY5vqqgH_YTqk9PJIDGj1ebaCyi4JJGzv711LMP33BeqWNjp8Q8V3i7E6A-ChU_mNwT19w-tqCGTT7hf21jxExj_LYbHB4IY6vCosj1iPZ-BguI-jrX8L64oQHaqJYs49LCcEDzIIFUX8sEE-wjguHcOF8fTaJtF_X7o1cF8h6EZsJhJP7l68GZp61WQBh2qSS_0YroLgHxdDpq1kCNr2Fcd5g49Z2w5kiNnb4k_MLhGIGTzFW0i8HtfWCd34ppnxMJjqS1hrhvLel3APQ2xwwZjdniA_5Q1HGiposFTC1gR-E3GynCrFnwd9d2zqlSQ7ZwDwV_lrf3KMIBirX5NMRHnK42pz4bRztD-ny-zdKV_XQiAKdpQhKSJt3rvuvQAuk1MRHlbakR_wixEX6GFKDLtum7p-LiN98LIQ-drVCp-hb2NviaE-6gqTFJhgT6wmlkEmCX3dTO3byjkomzdzBoMAhIequvdHgEe6n_D2fa4KjHaRsWiSIoEgSsqrritWKZLzPK7KiqdSXjQjHds5VNnLADvAK1JTj02k2gGvHirW3S1SnttdUduO84shYXf7wcjqC71uMOvIWux4XetK2IInc2HeloLTwVPUvZnmMa_V2FDNqLkFJt1DPzHOxRu2HxGlUJo-OBwmjx5TM41vpQPtQl3yZRDE0oQpgwfg5VIJbiRd6eagNyNDcLNTdMTVXrWKn7QwOrilX5vyof6iK2fp1THDvX455zVSacBhZHDcidLsS78nmpp5h7gxtSCXn9xQCZSVDgiLKebija6lLWFouIM4NsAXURTwZamrdardqgHqdeEI6hgXlJoI6DRTXCt4kcAhT3-XGRsUqZqLiFeWRZn7Jw73TEhffrkh0N9SmnHVVm4JuAwFl2g7HWK3W9xdiG8o0EgKZypthB9-uZbp0KUeI75fKiH7Vu7vbFlRWl1Vzdm3ow2QPQZ4XcddcVmyIfxgrrow91ZgPeWlnbNTmPvefdjxM6VXEG6XkzfMsLyPvIhoncKfmZYGowdHniDTwOoy-E0bmY9rCffnvxYunxxhN_Kz_2IMzONHMmAOm8tSAPa9UgvJLx3WdRbIW_hwhDeXnukuAIkwaYvN2tJzqp-smMJ7GtD3EmfHLYc-g1aIPUPi5w2AcR05V_mK0?></g></svg>